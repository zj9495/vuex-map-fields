!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("lodash")):"function"==typeof define&&define.amd?define(["exports","lodash"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["vuex-map-fields"]={},e.lodash)}(this,function(e,t){"use strict";function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){var r=t.split(".").slice(-1)[0];if(e[r])throw new Error("The key `".concat(r,"` is already in use."));return e[r]=t,e},{})}var f=function(){function e(t,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._preproxy=new WeakMap,this._handler=r,this.proxify(t,[])}var t,n,o;return t=e,(n=[{key:"makeHandler",value:function(e){var t=this;return{set:function(r,n,o,a){return"object"==typeof o&&(o=t.proxify(o,[].concat(i(e),[n]))),r[n]=o,t._handler.set&&t._handler.set(r,[].concat(i(e),[n]),o,a),!0},deleteProperty:function(r,n){if(Reflect.has(r,n)){t.unproxy(r,n);var o=Reflect.deleteProperty(r,n);return o&&t._handler.deleteProperty&&t._handler.deleteProperty(r,[].concat(i(e),[n])),o}return!1}}}},{key:"unproxy",value:function(e,t){this._preproxy.has(e[t])&&(e[t]=this._preproxy.get(e[t]),this._preproxy.delete(e[t]));for(var r=0,n=Object.keys(e[t]);r<n.length;r++){var o=n[r];"object"==typeof e[t][o]&&this.unproxy(e[t],o)}}},{key:"proxify",value:function(e,t){for(var r=0,n=Object.keys(e);r<n.length;r++){var o=n[r];"object"==typeof e[o]&&(e[o]=this.proxify(e[o],[].concat(i(t),[o])))}var a=new Proxy(e,this.makeHandler(t));return this._preproxy.set(a,e),a}}])&&r(t.prototype,n),o&&r(t,o),e}();function l(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=o("string"==typeof r[0]?[].concat(r):[""].concat(r),4),a=i[0],u=i[1],c=i[2],f=i[3];return a.length&&"/"!==a.charAt(a.length-1)&&(a+="/"),c="".concat(a).concat(c||"getField"),f="".concat(a).concat(f||"updateField"),e(a,u,c,f)}}function s(e){return function(t){return""==t?e:t.split(/[.[\]]+/).reduce(function(e,t){return e[t]},e)}}function y(e,t){var r=t.path,n=t.value;r.split(/[.[\]]+/).reduce(function(e,t,r,o){return o.length===r+1&&(e[t]=n),e[t]},e)}var p=l(function(e,t,r,n){var o=Array.isArray(t)?c(t):t;return Object.keys(o).reduce(function(e,t){var i=o[t],a={get:function(){return this.$store.getters[r](i)},set:function(e){this.$store.commit(n,{path:i,value:e})}};return e[t]=a,e},{})}),d=l(function(e,t,r,n){var o=Array.isArray(t)?c(t):t;return Object.keys(o).reduce(function(e,t){var i=o[t];return e[t]={get:function(){var e,t=this.$store;return(e=t.getters[r](i),Object.keys(e).map(function(t){return[t,e[t]]})).map(function(e){return Object.keys(e[1]).reduce(function(o,a){var u="".concat(i,"[").concat(e[0],"].").concat(a);return Object.defineProperty(o,a,{get:function(){return t.getters[r](u)},set:function(e){t.commit(n,{path:u,value:e})}})},{})})}},e},{})}),h=l(function(e,r,n,o){var i=Array.isArray(r)?c(r):r;return Object.keys(i).reduce(function(e,r){var a=i[r].replace(/\.?\*/g,"");return e[r]={get:function(){var e=this.$store,r=t.cloneDeep(e.getters[n](a));return r?new f(r,{set:function(t,r,n){var i=a?"".concat(a,".").concat(r.join(".")):r;e.commit(o,{path:i,value:n})}}):{}}},e},{})});e.createHelpers=function(e){var t,r=e.getterType,o=e.mutationType;return n(t={},r,s),n(t,o,y),n(t,"mapFields",l(function(e,t){return p(e,t,r,o)})),n(t,"mapMultiRowFields",l(function(e,t){return d(e,t,r,o)})),n(t,"mapObjectFields",l(function(e,t){return h(e,t,r,o)})),t},e.getField=s,e.mapFields=p,e.mapMultiRowFields=d,e.mapObjectFields=h,e.updateField=y,Object.defineProperty(e,"__esModule",{value:!0})});